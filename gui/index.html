<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Herald</title>
    <link rel='icon' href='assets/icons/favicon.png' type='image/x-icon' />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="assets/css/fontawesome.min.css">

    <!-- CSS Reset -->
    <link rel="stylesheet" href="assets/css/normalize.css">

    <!-- Milligram CSS minified -->
    <link rel="stylesheet" href="assets/css/milligram.min.css">

    <!-- Datatables -->
    <link rel="stylesheet" href="assets/css/datatables.min.css">

    <!-- Mesages -->
    <link rel="stylesheet" href="assets/css/overhang.min.css">

    <!-- Charts -->
    <link rel="stylesheet" href="assets/css/chart.min.css">

    <!-- Main Styles -->
    <link rel="stylesheet" href="assets/css/styles.css">

    <!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>

<body onload=start()>

    <!--CREATE EXPERIMENT MODAL-->
    <div id="createExperimentModal" class="modal">
        <div class="modal-content">
            <span id="createExperimentModalClose" class="modal-close">&times;</span>
            <h1>Create an experiment</h1>
            <div class="clearfix"></div>
            <hr class="m-0 mb-2" />
            <form id="createExperimentForm">
                <fieldset>
                    <!--label-->
                    <label class="formLabel" for="formLabel_experimentName">Experiment name
                        <i class="far fa-question-circle"><span class="tooltiptext">the name for the
                                experiment</span></i>
                    </label>
                    <input type="text" placeholder="my unique experiment name" id="formLabel_experimentName" required>
                    <!--output location-->
                    <label class="formLabel" for="formLabel_outputLocation">Output location
                        <i class="far fa-question-circle"><span class="tooltiptext">directory where experiment will be
                                stored <br />note: reads will be placed in a sub directory</span></i>
                    </label>
                    <input type="text" placeholder="/Users/me/data" id="formLabel_outputLocation" required>
                    <!--has been sequenced-->
                    <label class="formLabel" for="formLabel_sequenced">Has it been sequenced yet?
                        <i class="far fa-question-circle"><span class="tooltiptext">select yes if this experiment
                                has been run already
                                <br /> note: herald will check the sequence data is
                                available</span></i>
                    </label>
                    <input type="radio" id="formLabel_sequencedTrue" name="formLabel_sequenced" value="true">
                    <label class="label-inline" for="formLabel_sequencedTrue">Yes</label><br />
                    <input type="radio" id="formLabel_sequencedFalse" name="formLabel_sequenced" value="false" checked>
                    <label class="label-inline" for="formLabel_sequencedFalse">No</label>

                    <!--submit button-->
                    <div class="clearfix"></div>
                    <hr class="m-0 mb-2" />
                    <input class="button-primary" type="submit" value="Create experiment">
                </fieldset>
            </form>
        </div>
    </div>

    <!--SAMPLE DETAILS MODAL-->
    <div id="sampleModal" class="modal">
        <div class="modal-content">
            <span id="sampleModalClose" class="modal-close">&times;</span>
            <h1 id="sampleModal_samplename"></h1>
            <div class="clearfix"></div>
            <hr class="m-0 mb-2" />
            <p class="text-large">Details:</p>
            <pre id=sampleModal_content></pre>
            <div class="clearfix"></div>
            <hr class="m-0 mb-2" />
            <button class="button" id=sampleModal_delete>delete</button>
        </div>
    </div>

    <!--NAVBAR-->
    <div class="navbar">
        <div class="row">

            <div class="column column-30 col-site-title">
                <a href="#" class="site-title float-left">Herald</a>
            </div>

            <div class="icon">
                <i id="refreshPage" class="fas fa-redo fa-1x"><span class="tooltiptext">Check progress and refresh the
                        app</span></i>
            </div>

            <div class="svg-div" id="logoResize">
                <div class="svg-logo"></div>
            </div>

            <div class="icon">
                <i class="fa fa-envelope fa-1x"></i>
            </div>

            <div class="column column-30">
                <div class="user-section">
                    <a href="#">
                        <div class="username">
                            <h4 id="dateStamp">Today, Feb | 23:00</h4>
                            <p id="refreshStamp">na</p>
                        </div>
                    </a>
                </div>
            </div>

        </div>
    </div>
    <div class="row">

        <!--SIDEBAR-->
        <div id="sidebar" class="column">
            <h5>Navigation</h5>
            <ul>
                <li><a href="#"><em class="fa fa-home"></em> Home</a></li>
                <li><a href="#overview"><em class="far fa-chart-bar"></em> Overview</a></li>
                <li><a href="#submission"><em class="far fa-edit"></em> Submission</a></li>
                <li><a href="#samplesheet"><em class="fa fa-table"></em> Sample Sheet</a></li>
                <li><a href="#settings"><em class="fa fa-cogs"></em> Settings</a></li>
            </ul>
        </div>

        <!--MAIN-->
        <section id="main-content" class="column column-offset-20">

            <!--BANNER-->
            <div class="row grid-responsive">
                <div class="column page-heading">
                    <div class="large-card">
                        <h1>Welcome to Herald</h1>
                        <p class="text-large">Get started by creating an experiment and adding some samples.</p>
                        <button class="button" id="createExperimentModalOpen">create experiment</button>
                    </div>
                </div>
            </div>

            <!--OVERVIEW-->
            <h5>Overview</h5>
            <a class="anchor" name="overview"></a>
            <div class="row grid-responsive">

                <!--staging-->
                <div class="column column-50">
                    <div class="card">
                        <div class="card-title">
                            <h2>Staging</h2>
                        </div>
                        <div class="card-block">
                            <!--experiment count-->
                            <div class="mt-1">
                                <div class="badge background-primary float-left" id="staging_experimentCount">0</div>
                                <div class="float-left ml-1">
                                    <p class="m-0"><strong>Experiments</strong> <span class="text-muted">on
                                            record</span></p>
                                    <p class="text-small text-muted">unused text field</p>
                                </div>
                                <div class="clearfix"></div>
                                <hr class="m-0 mb-2" />
                            </div>
                            <!--sample db count and db location-->
                            <div class="mt-1">
                                <div class="badge background-primary float-left" id="staging_sampleCount">0</div>
                                <div class="float-left ml-1">
                                    <p class="m-0"><strong>Samples</strong> <span class="text-muted">in the
                                            database</span></p>
                                    <p class="text-small text-muted" id="staging_dbLocation">na</p>
                                </div>
                                <div class="clearfix"></div>
                                <hr class="m-0 mb-2" />
                            </div>
                            <!--tagged samples and total number of proccesses-->
                            <div class="mt-1">
                                <div class="badge background-primary float-left" id="staging_taggedCount">0</div>
                                <div class="float-left ml-1">
                                    <p class="m-0"><strong>Tagged</strong> <span class="text-muted">samples</span></p>
                                    <p class="text-small text-muted" id="staging_processCount">x processes in total</p>
                                </div>
                                <div class="clearfix"></div>
                                <hr class="m-0 mb-2" />
                            </div>
                            <!--announce and unstage buttons-->
                            <div class="mt-1">
                                <button class="button" id="staging_announce">announce</button>
                                <button class="button button-outline" id="staging_unstage">unstage</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!--announcements-->
                <div class="column column-50">
                    <div class="card">
                        <div class="card-title">
                            <h2>Announcements</h2>
                        </div>
                        <div class="card-block">
                            <div class="canvas-wrapper">
                                <canvas class="chart" id="pieChart" height="auto" width="auto"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row grid-responsive mt-1">

                <!--status-->
                <div class="column column-50">
                    <div class="card">
                        <div class="card-title">
                            <h2 class="float-left">Status</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="card-block">
                            <!--network-->
                            <div class="mt-1">
                                <div class="float-left" id="status_network"></div>
                                <div class="float-left ml-1">
                                    <p class="m-0"><strong>Network</strong> <span class="text-muted">connection</span>
                                    </p>
                                    <p class="text-small text-muted" id="status_network_timestamp">no change since startup
                                    </p>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                            <!--minknow-->
                            <div class="mt-1">
                                <div class="float-left" id="status_minknow"></div>
                                <div class="float-left ml-1">
                                    <p class="m-0"><strong>MinKNOW</strong> <span class="text-muted">API</span>
                                    </p>
                                    <p class="text-small text-muted" id="status_minknow_timestamp">no change since startup
                                    </p>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--tasks-->
                <div class="column column-50">
                    <div class="card">
                        <div class="card-title">
                            <h2 class="float-left">Tasks</h2>
                            <div class="badge float-right">3 In Progress</div>
                            <!--<div class="badge background-success float-right mr-1">5 Complete</div>-->
                            <div class="clearfix"></div>
                        </div>
                        <div class="card-block progress-bars">
                            <h5 class="float-left mt-1">Pipeline A</h5>
                            <p class="float-right text-small text-muted mt-1">25%</p>
                            <div class="clearfix"></div>
                            <div class="progress-bar">
                                <div class="progress background-primary" style="width: 25%;"></div>
                            </div>
                            <h5 class="float-left mt-1">Pipeline B</h5>
                            <p class="float-right text-small text-muted mt-1">50%</p>
                            <div class="clearfix"></div>
                            <div class="progress-bar">
                                <div class="progress background-primary" style="width: 50%;"></div>
                            </div>
                            <h5 class="float-left mt-1">Upload</h5>
                            <p class="float-right text-small text-muted mt-1">75%</p>
                            <div class="clearfix"></div>
                            <div class="progress-bar">
                                <div class="progress background-primary" style="width: 75%;"></div>
                            </div>
                            <h5 class="float-left mt-1">Sequencing</h5>
                            <p class="float-right text-small text-muted mt-1">100%</p>
                            <div class="clearfix"></div>
                            <div class="progress-bar">
                                <div class="progress background-primary" style="width: 100%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--SUBMISSION-->
            <h5 class="mt-2">Submission</h5>
            <a class="anchor" name="submission"></a>
            <div class="row grid-responsive">
                <div class="column ">
                    <div class="card">
                        <div class="card-title">
                            <h3>Add a sample to the database</h3>
                        </div>
                        <div class="card-block">
                            <form id="addSampleForm">
                                <fieldset>
                                    <!--label-->
                                    <label class="formLabel" for="formLabel_sampleLabel">Label
                                        <i class="far fa-question-circle"><span class="tooltiptext">the name for the
                                                sample</span></i>
                                    </label>
                                    <input type="text" placeholder="sample xxx" id="formLabel_sampleLabel" required>
                                    <!--experiment-->
                                    <label class="formLabel" for="formLabel_sampleExperiment">Experiment
                                        <i class="far fa-question-circle"><span class="tooltiptext">the
                                                experiment this sample belongs to</span></i>
                                    </label>
                                    <select id="formLabel_sampleExperiment" required>
                                        <option value="" disabled selected>create an experiment first!</option>
                                    </select>
                                    <!--barcode-->
                                    <label class="formLabel" for="formLabel_sampleBarcode">Barcode</label>
                                    <select id="formLabel_sampleBarcode" required>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                    </select>
                                    <!--reference genome-->
                                    <label class="formLabel" for="formLabel_refGenome">Reference genome
                                        <i class="far fa-question-circle"><span class="tooltiptext">a reference
                                                genome</span></i>
                                    </label>
                                    <input type="file" id="formLabel_refGenome">
                                    <!--comment box-->
                                    <label class="formLabel" for="formLabel_sampleComment">Comment</label>
                                    <textarea placeholder="insert any additional information" id="formLabel_sampleComment"></textarea>
                                    <div class="clearfix"></div>
                                    <!--tags-->
                                    <label>Tags</label>
                                    <!--tags_sequence-->
                                    <input type="checkbox" id="formLabel_sequenceTag" value="sequence">
                                    <label class="label-inline" for="formLabel_sequenceTag">Sequence sample</label>
                                    <div class="clearfix"></div>
                                    <!--tags_rampart-->
                                    <input type="checkbox" id="formLabel_rampartTag" value="rampart">
                                    <label class="label-inline" for="formLabel_rampartTag">RAMPART</label>
                                    <div class="clearfix"></div>
                                    <div style="display:none; padding-left:2%;" id="addSampleForm_rampartOptions">
                                        <label for="formLabel_rampartFieldA">rampart option a:</label>
                                        <select class="form-control" id="formLabel_rampartFieldA">
                                            <option value="no">no</option>
                                            <option value="yes">yes</option>
                                        </select>
                                    </div>
                                    <!--tags_pipeline-->
                                    <input type="checkbox" id="formLabel_pipelineTag" value="pipeline">
                                    <label class="label-inline" for="formLabel_pipelineTag">Field bioinformatics
                                        pipeline</label>

                                    <!--submit button-->
                                    <div class="clearfix"></div>
                                    <hr class="m-0 mb-2" />
                                    <input class="button-primary" type="submit" value="Add sample">
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!--SAMPLE SHEET-->
            <h5 class="mt-2">Sample sheet</h5>
            <a class="anchor" name="samplesheet"></a>
            <div class="row grid-responsive">
                <div class="column ">
                    <div class="card">
                        <div class="card-title">
                            <h3>Current samples</h3>
                        </div>
                        <div class="card-block">
                            <table id="sampleTable">
                                <thead>
                                    <tr>
                                        <th>Sample Label</th>
                                        <th>Experiment Name</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="sampleTableContent">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!--SETTINGS-->
            <h5 class="mt-2">Settings</h5>
            <a class="anchor" name="settings"></a>
            <div class="row grid-responsive">
                <div class="column ">
                    <div class="card">
                        <div class="card-title">
                            <h3>Database settings</h3>
                        </div>
                        <div class="card-block">
                            <a class="button" id="wipeDatabase">wipe database</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- end of main section -->
            <p class="credit">Built by <a href="https://www.willrowe.net">Will Rowe</a> as part of the <a href="https://artic.network/">ARTIC Network</a> project<br \> &copy 2020</p>
        </section>
    </div>

    <!--JAVASCRIPT-->
    <!-- jquery libs -->
    <script src="assets/js/jquery-3.4.1.min.js"></script>
    <script src="assets/js/jquery-ui.min.js"></script>
    <script src="assets/js/overhang.min.js"></script>
    <script src="assets/js/datatables.min.js"></script>
    <script src="assets/js/chart.min.js"></script>

    <!-- connect UI actions to Go functions -->
    <script src="assets/js/main.js"></script>

    <!-- set up the page with the Go and JS generated data -->
    <script>
        $(document).ready(() => {
            fullPageRender()
        })
    </script>

    <!-- resize logo on scroll -->
    <script>
        $(window).scroll(function() {
            if ($(this).scrollTop() > 250) {
                document.getElementById("logoResize").classList.add("sticky");
            } else {
                document.getElementById("logoResize").classList.remove("sticky");
            }
        });
    </script>
</body>

</html>